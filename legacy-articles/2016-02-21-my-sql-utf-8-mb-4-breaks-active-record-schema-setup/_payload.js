export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb){return {data:{"content-query-RecLGoBgkJ":{_path:"\u002Flegacy-articles\u002F2016-02-21-my-sql-utf-8-mb-4-breaks-active-record-schema-setup",_dir:"legacy-articles",_draft:E,_partial:E,_locale:"en",_empty:E,title:$,description:h,excerpt:{type:aa,children:[{type:a,tag:c,props:{},children:[{type:a,tag:d,props:{href:ab,rel:[e]},children:[{type:b,value:ac}]}]},{type:a,tag:c,props:{},children:[{type:b,value:ad}]},{type:a,tag:g,props:{code:F},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:b,value:F}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:ae}]},{type:a,tag:g,props:{code:G},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:b,value:G}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:af}]},{type:a,tag:l,props:{id:H},children:[{type:b,value:I}]},{type:a,tag:c,props:{},children:[{type:b,value:ag}]},{type:a,tag:c,props:{},children:[{type:b,value:ah},{type:a,tag:i,props:{},children:[{type:b,value:ai}]},{type:b,value:aj}]},{type:a,tag:c,props:{},children:[{type:a,tag:d,props:{href:y,rel:[e]},children:[{type:a,tag:u,props:{alt:h,src:y},children:[]}]}]},{type:a,tag:l,props:{id:J},children:[{type:b,value:K}]},{type:a,tag:c,props:{},children:[{type:b,value:ak},{type:a,tag:f,props:{},children:[{type:b,value:r}]},{type:b,value:al},{type:a,tag:f,props:{},children:[{type:b,value:am}]},{type:b,value:an}]},{type:a,tag:c,props:{},children:[{type:b,value:ao},{type:a,tag:f,props:{},children:[{type:b,value:ap}]},{type:b,value:aq}]},{type:a,tag:l,props:{id:L},children:[{type:b,value:M}]},{type:a,tag:m,props:{id:n},children:[{type:b,value:n}]},{type:a,tag:c,props:{},children:[{type:b,value:ar},{type:a,tag:as,props:{},children:[{type:b,value:at}]},{type:b,value:au}]},{type:a,tag:c,props:{},children:[{type:b,value:av},{type:a,tag:f,props:{},children:[{type:b,value:aw}]},{type:b,value:ax}]},{type:a,tag:m,props:{id:o},children:[{type:b,value:o}]},{type:a,tag:c,props:{},children:[{type:b,value:ay},{type:a,tag:d,props:{href:z,rel:[e]},children:[{type:b,value:az}]},{type:b,value:aA}]},{type:a,tag:c,props:{},children:[{type:b,value:aB},{type:a,tag:f,props:{},children:[{type:b,value:aC}]},{type:b,value:aD}]},{type:a,tag:g,props:{code:N},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:b,value:N}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:aE},{type:a,tag:f,props:{},children:[{type:b,value:r}]},{type:b,value:aF}]},{type:a,tag:g,props:{code:O},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:b,value:O}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:aG},{type:a,tag:aH,props:{},children:[]},{type:b,value:aI},{type:a,tag:d,props:{href:aJ,rel:[e]},children:[{type:b,value:aK}]},{type:b,value:aL}]},{type:a,tag:m,props:{id:p},children:[{type:b,value:p}]},{type:a,tag:c,props:{},children:[{type:b,value:aM},{type:a,tag:f,props:{},children:[{type:b,value:r}]},{type:b,value:aN}]},{type:a,tag:c,props:{},children:[{type:b,value:aO},{type:a,tag:f,props:{},children:[{type:b,value:r}]},{type:b,value:aP},{type:a,tag:d,props:{href:aQ,rel:[e]},children:[{type:b,value:aR}]},{type:b,value:A}]},{type:a,tag:l,props:{id:P},children:[{type:b,value:Q}]},{type:a,tag:c,props:{},children:[{type:b,value:aS}]},{type:a,tag:m,props:{id:R},children:[{type:b,value:n}]},{type:a,tag:c,props:{},children:[{type:b,value:aT},{type:a,tag:f,props:{},children:[{type:b,value:aU}]},{type:b,value:aV}]},{type:a,tag:c,props:{},children:[{type:b,value:aW}]},{type:a,tag:m,props:{id:S},children:[{type:b,value:o}]},{type:a,tag:c,props:{},children:[{type:a,tag:aX,props:{},children:[{type:b,value:aY}]}]},{type:a,tag:c,props:{},children:[{type:b,value:aZ},{type:a,tag:f,props:{},children:[{type:b,value:a_}]},{type:b,value:a$}]},{type:a,tag:g,props:{code:T},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:b,value:T}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:ba},{type:a,tag:d,props:{href:bb,rel:[e]},children:[{type:b,value:bc}]},{type:b,value:bd}]},{type:a,tag:v,props:{id:be},children:[{type:b,value:bf}]},{type:a,tag:c,props:{},children:[{type:b,value:bg},{type:a,tag:f,props:{},children:[{type:b,value:bh}]},{type:b,value:bi},{type:a,tag:f,props:{},children:[{type:b,value:bj}]},{type:b,value:bk}]},{type:a,tag:g,props:{code:U},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:b,value:U}]}]}]},{type:a,tag:v,props:{id:bl},children:[{type:b,value:bm}]},{type:a,tag:c,props:{},children:[{type:b,value:bn}]},{type:a,tag:c,props:{},children:[{type:b,value:bo},{type:a,tag:f,props:{},children:[{type:b,value:bp}]},{type:b,value:bq}]},{type:a,tag:g,props:{code:V},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:b,value:V}]}]}]},{type:a,tag:m,props:{id:W},children:[{type:b,value:p}]},{type:a,tag:c,props:{},children:[{type:b,value:br}]},{type:a,tag:l,props:{id:w},children:[{type:b,value:w}]},{type:a,tag:c,props:{},children:[{type:b,value:bs}]},{type:a,tag:l,props:{id:X},children:[{type:b,value:Y}]},{type:a,tag:c,props:{},children:[{type:b,value:bt}]},{type:a,tag:c,props:{},children:[{type:b,value:bu}]},{type:a,tag:m,props:{id:Z},children:[{type:b,value:_}]},{type:a,tag:c,props:{},children:[{type:b,value:bv},{type:a,tag:d,props:{href:bw,rel:[e]},children:[{type:b,value:bx}]},{type:b,value:A}]},{type:a,tag:c,props:{},children:[{type:b,value:by}]},{type:a,tag:v,props:{id:bz},children:[{type:b,value:bA}]},{type:a,tag:c,props:{},children:[{type:b,value:bB}]},{type:a,tag:c,props:{},children:[{type:b,value:bC},{type:a,tag:d,props:{href:bD,rel:[e]},children:[{type:b,value:bE}]}]},{type:a,tag:l,props:{id:x},children:[{type:b,value:x}]},{type:a,tag:B,props:{},children:[{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:z,rel:[e]},children:[{type:b,value:bF}]}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:bG,rel:[e]},children:[{type:b,value:bH}]}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:bI,rel:[e]},children:[{type:b,value:bJ}]}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:bK,rel:[e]},children:[{type:b,value:bL}]}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:bM,rel:[e]},children:[{type:b,value:bN}]}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:bO,rel:[e]},children:[{type:b,value:bP}]}]}]},{type:a,tag:bQ,props:{},children:[]},{type:a,tag:B,props:{},children:[{type:a,tag:j,props:{},children:[{type:b,value:bR},{type:a,tag:f,props:{},children:[{type:b,value:bS}]},{type:b,value:bT},{type:a,tag:f,props:{},children:[{type:b,value:bU}]},{type:b,value:bV},{type:a,tag:d,props:{href:bW,rel:[e]},children:[{type:a,tag:u,props:{alt:C,src:D},children:[]}]}]},{type:a,tag:j,props:{},children:[{type:b,value:bX},{type:a,tag:d,props:{href:bY,rel:[e]},children:[{type:b,value:bZ}]},{type:b,value:b_},{type:a,tag:d,props:{href:b$,rel:[e]},children:[{type:a,tag:u,props:{alt:C,src:D},children:[]}]}]}]}]},title_en:ca,slug:"my-sql-utf-8-mb-4-breaks-active-record-schema-setup",aliases:[$,ca],created_at:"2016-02-21T23:30:29.000Z",published_at:cb,updated_at:cb,tags:["database","mysql","ruby-on-rails","web"],moc:["Information Technology"],body:{type:aa,children:[{type:a,tag:c,props:{},children:[{type:a,tag:d,props:{href:ab,rel:[e]},children:[{type:b,value:ac}]}]},{type:a,tag:c,props:{},children:[{type:b,value:ad}]},{type:a,tag:g,props:{code:F},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:a,tag:i,props:{class:s},children:[{type:a,tag:i,props:{},children:[{type:b,value:"~\u002Fapp $ RAILS_ENV=production rake db:migrate\n\n== 20150226092347 DeviseCreateUsers: migrating================================\n-- create_table(:users)\n   -\u003E 0.0070s\n-- add_index(:users, :email, {:unique=\u003Etrue})\nrake aborted!\nStandardError: An error has occurred, all later migrations canceled:\n\nMysql2::Error: Specified key was too long; max key length is 767 bytes: CREATE UNIQUE INDEX `index_users_on_email`  ON `users` (`email`) ~\u002F.rvm\u002Fgems\u002Fruby-2.2.2\u002Fgems\u002Fmysql2-0.4.2\u002Flib\u002Fmysql2\u002Fclient.rb:107:in `_query'\n......"}]}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:ae}]},{type:a,tag:g,props:{code:G},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:a,tag:i,props:{class:s},children:[{type:a,tag:i,props:{},children:[{type:b,value:"Mysql2::Error: Specified key was too long; max key length is 767 bytes"}]}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:af}]},{type:a,tag:l,props:{id:H},children:[{type:b,value:I}]},{type:a,tag:c,props:{},children:[{type:b,value:ag}]},{type:a,tag:c,props:{},children:[{type:b,value:ah},{type:a,tag:i,props:{},children:[{type:b,value:ai}]},{type:b,value:aj}]},{type:a,tag:c,props:{},children:[{type:a,tag:d,props:{href:y,rel:[e]},children:[{type:a,tag:u,props:{alt:h,src:y},children:[]}]}]},{type:a,tag:l,props:{id:J},children:[{type:b,value:K}]},{type:a,tag:c,props:{},children:[{type:b,value:ak},{type:a,tag:f,props:{},children:[{type:b,value:r}]},{type:b,value:al},{type:a,tag:f,props:{},children:[{type:b,value:am}]},{type:b,value:an}]},{type:a,tag:c,props:{},children:[{type:b,value:ao},{type:a,tag:f,props:{},children:[{type:b,value:ap}]},{type:b,value:aq}]},{type:a,tag:l,props:{id:L},children:[{type:b,value:M}]},{type:a,tag:m,props:{id:n},children:[{type:b,value:n}]},{type:a,tag:c,props:{},children:[{type:b,value:ar},{type:a,tag:as,props:{},children:[{type:b,value:at}]},{type:b,value:au}]},{type:a,tag:c,props:{},children:[{type:b,value:av},{type:a,tag:f,props:{},children:[{type:b,value:aw}]},{type:b,value:ax}]},{type:a,tag:m,props:{id:o},children:[{type:b,value:o}]},{type:a,tag:c,props:{},children:[{type:b,value:ay},{type:a,tag:d,props:{href:z,rel:[e]},children:[{type:b,value:az}]},{type:b,value:aA}]},{type:a,tag:c,props:{},children:[{type:b,value:aB},{type:a,tag:f,props:{},children:[{type:b,value:aC}]},{type:b,value:aD}]},{type:a,tag:g,props:{code:N},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:a,tag:i,props:{class:s},children:[{type:a,tag:i,props:{},children:[{type:b,value:"# config\u002Finitializers\u002Fmysqlpls.rb\nrequire 'active_record\u002Fconnection_adapters\u002Fabstract_mysql_adapter'\n\nmodule ActiveRecord\n  module ConnectionAdapters\n    class AbstractMysqlAdapter\n      NATIVE_DATABASE_TYPES[:string] = { :name =\u003E \"varchar\", :limit =\u003E 191 }\n    end\n  end\nend"}]}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:aE},{type:a,tag:f,props:{},children:[{type:b,value:r}]},{type:b,value:aF}]},{type:a,tag:g,props:{code:O},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:a,tag:i,props:{class:s},children:[{type:a,tag:i,props:{},children:[{type:b,value:"NATIVE_DATABASE_TYPES = {\n  primary_key: \"int auto_increment PRIMARY KEY\",\n  string:      { name: \"varchar\", limit: 255 },\n  text:        { name: \"text\" },\n  integer:     { name: \"int\", limit: 4 },\n  float:       { name: \"float\" },\n  decimal:     { name: \"decimal\" },\n  datetime:    { name: \"datetime\" },\n  time:        { name: \"time\" },\n  date:        { name: \"date\" },\n  binary:      { name: \"blob\" },\n  boolean:     { name: \"tinyint\", limit: 1 },\n  json:        { name: \"json\" },\n}"}]}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:aG},{type:a,tag:aH,props:{},children:[]},{type:b,value:aI},{type:a,tag:d,props:{href:aJ,rel:[e]},children:[{type:b,value:aK}]},{type:b,value:aL}]},{type:a,tag:m,props:{id:p},children:[{type:b,value:p}]},{type:a,tag:c,props:{},children:[{type:b,value:aM},{type:a,tag:f,props:{},children:[{type:b,value:r}]},{type:b,value:aN}]},{type:a,tag:c,props:{},children:[{type:b,value:aO},{type:a,tag:f,props:{},children:[{type:b,value:r}]},{type:b,value:aP},{type:a,tag:d,props:{href:aQ,rel:[e]},children:[{type:b,value:aR}]},{type:b,value:A}]},{type:a,tag:l,props:{id:P},children:[{type:b,value:Q}]},{type:a,tag:c,props:{},children:[{type:b,value:aS}]},{type:a,tag:m,props:{id:R},children:[{type:b,value:n}]},{type:a,tag:c,props:{},children:[{type:b,value:aT},{type:a,tag:f,props:{},children:[{type:b,value:aU}]},{type:b,value:aV}]},{type:a,tag:c,props:{},children:[{type:b,value:aW}]},{type:a,tag:m,props:{id:S},children:[{type:b,value:o}]},{type:a,tag:c,props:{},children:[{type:a,tag:aX,props:{},children:[{type:b,value:aY}]}]},{type:a,tag:c,props:{},children:[{type:b,value:aZ},{type:a,tag:f,props:{},children:[{type:b,value:a_}]},{type:b,value:a$}]},{type:a,tag:g,props:{code:T},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:a,tag:i,props:{class:s},children:[{type:a,tag:i,props:{},children:[{type:b,value:"[mysqld]\ninnodb_file_format = Barracuda\ninnodb_file_per_table = 1\ninnodb_large_prefix"}]}]}]}]}]},{type:a,tag:c,props:{},children:[{type:b,value:ba},{type:a,tag:d,props:{href:bb,rel:[e]},children:[{type:b,value:bc}]},{type:b,value:bd}]},{type:a,tag:v,props:{id:be},children:[{type:b,value:bf}]},{type:a,tag:c,props:{},children:[{type:b,value:bg},{type:a,tag:f,props:{},children:[{type:b,value:bh}]},{type:b,value:bi},{type:a,tag:f,props:{},children:[{type:b,value:bj}]},{type:b,value:bk}]},{type:a,tag:g,props:{code:U},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:a,tag:i,props:{class:s},children:[{type:a,tag:i,props:{},children:[{type:b,value:"create_table :table_name, options: 'ROW_FORMAT=DYNAMIC' do |t|\n  ..."}]}]}]}]}]},{type:a,tag:v,props:{id:bl},children:[{type:b,value:bm}]},{type:a,tag:c,props:{},children:[{type:b,value:bn}]},{type:a,tag:c,props:{},children:[{type:b,value:bo},{type:a,tag:f,props:{},children:[{type:b,value:bp}]},{type:b,value:bq}]},{type:a,tag:g,props:{code:V},children:[{type:a,tag:k,props:{},children:[{type:a,tag:g,props:{__ignoreMap:h},children:[{type:a,tag:i,props:{class:s},children:[{type:a,tag:i,props:{},children:[{type:b,value:"ActiveSupport.on_load :active_record do\n  module ActiveRecord::ConnectionAdapters   \n    class AbstractMysqlAdapter \n      def create_table_with_innodb_row_format(table_name, options = {}) \n        table_options = options.reverse_merge(:options =\u003E 'ENGINE=InnoDB ROW_FORMAT=DYNAMIC')\n\n        create_table_without_innodb_row_format(table_name, table_options) do |td|\n         yield td if block_given? \n        end\n      end\n      alias_method_chain :create_table, :innodb_row_format \n    end\n  end\nend"}]}]}]}]}]},{type:a,tag:m,props:{id:W},children:[{type:b,value:p}]},{type:a,tag:c,props:{},children:[{type:b,value:br}]},{type:a,tag:l,props:{id:w},children:[{type:b,value:w}]},{type:a,tag:c,props:{},children:[{type:b,value:bs}]},{type:a,tag:l,props:{id:X},children:[{type:b,value:Y}]},{type:a,tag:c,props:{},children:[{type:b,value:bt}]},{type:a,tag:c,props:{},children:[{type:b,value:bu}]},{type:a,tag:m,props:{id:Z},children:[{type:b,value:_}]},{type:a,tag:c,props:{},children:[{type:b,value:bv},{type:a,tag:d,props:{href:bw,rel:[e]},children:[{type:b,value:bx}]},{type:b,value:A}]},{type:a,tag:c,props:{},children:[{type:b,value:by}]},{type:a,tag:v,props:{id:bz},children:[{type:b,value:bA}]},{type:a,tag:c,props:{},children:[{type:b,value:bB}]},{type:a,tag:c,props:{},children:[{type:b,value:bC},{type:a,tag:d,props:{href:bD,rel:[e]},children:[{type:b,value:bE}]}]},{type:a,tag:l,props:{id:x},children:[{type:b,value:x}]},{type:a,tag:B,props:{},children:[{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:z,rel:[e]},children:[{type:b,value:bF}]}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:bG,rel:[e]},children:[{type:b,value:bH}]}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:bI,rel:[e]},children:[{type:b,value:bJ}]}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:bK,rel:[e]},children:[{type:b,value:bL}]}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:bM,rel:[e]},children:[{type:b,value:bN}]}]},{type:a,tag:j,props:{},children:[{type:a,tag:d,props:{href:bO,rel:[e]},children:[{type:b,value:bP}]}]}]},{type:a,tag:bQ,props:{},children:[]},{type:a,tag:B,props:{},children:[{type:a,tag:j,props:{},children:[{type:b,value:bR},{type:a,tag:f,props:{},children:[{type:b,value:bS}]},{type:b,value:bT},{type:a,tag:f,props:{},children:[{type:b,value:bU}]},{type:b,value:bV},{type:a,tag:d,props:{href:bW,rel:[e]},children:[{type:a,tag:u,props:{alt:C,src:D},children:[]}]}]},{type:a,tag:j,props:{},children:[{type:b,value:bX},{type:a,tag:d,props:{href:bY,rel:[e]},children:[{type:b,value:bZ}]},{type:b,value:b_},{type:a,tag:d,props:{href:b$,rel:[e]},children:[{type:a,tag:u,props:{alt:C,src:D},children:[]}]}]}]}],toc:{title:h,searchDepth:q,depth:q,links:[{id:H,depth:q,text:I},{id:J,depth:q,text:K},{id:L,depth:q,text:M,children:[{id:n,depth:t,text:n},{id:o,depth:t,text:o},{id:p,depth:t,text:p}]},{id:P,depth:q,text:Q,children:[{id:R,depth:t,text:n},{id:S,depth:t,text:o},{id:W,depth:t,text:p}]},{id:w,depth:q,text:w},{id:X,depth:q,text:Y,children:[{id:Z,depth:t,text:_}]},{id:x,depth:q,text:x}]}},_type:"markdown",_id:"garden:legacy-articles:2016-02-21-my-sql-utf-8-mb-4-breaks-active-record-schema-setup.md",_source:"garden",_file:"legacy-articles\u002F2016-02-21-my-sql-utf-8-mb-4-breaks-active-record-schema-setup.md",_extension:"md"}},prerenderedAt:void 0}}("element","text","p","a","nofollow","code-inline","code","","span","li","pre","h2","h3","æ–¹å‘","æ–¹æ³•","ç¸½çµ",2,":string","line",3,"img","h4","çµèª","åƒè€ƒè³‡æ–™","https:\u002F\u002Fi0.wp.com\u002Fblog.fntsr.tw\u002Fwp-content\u002Fuploads\u002F2016\u002F02\u002F%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7-2016-02-20-%E4%B8%8A%E5%8D%883.12.53.png?ssl=1","https:\u002F\u002Fgithub.com\u002Frails\u002Frails\u002Fissues\u002F9855","ã€‚","ol","â†©","https:\u002F\u002Fs.w.org\u002Fimages\u002Fcore\u002Femoji\u002F14.0.0\u002Fsvg\u002F21a9.svg",false,"~\u002Fapp $ RAILS_ENV=production rake db:migrate\n\n== 20150226092347 DeviseCreateUsers: migrating================================\n-- create_table(:users)\n   -\u003E 0.0070s\n-- add_index(:users, :email, {:unique=\u003Etrue})\nrake aborted!\nStandardError: An error has occurred, all later migrations canceled:\n\nMysql2::Error: Specified key was too long; max key length is 767 bytes: CREATE UNIQUE INDEX `index_users_on_email`  ON `users` (`email`) ~\u002F.rvm\u002Fgems\u002Fruby-2.2.2\u002Fgems\u002Fmysql2-0.4.2\u002Flib\u002Fmysql2\u002Fclient.rb:107:in `_query'\n......\n","Mysql2::Error: Specified key was too long; max key length is 767 bytes\n","ä»€éº¼æ™‚å€™æœƒæ¡ç”¨utf8mb4ä½œç‚º-mysql-çš„ç·¨ç¢¼","ä»€éº¼æ™‚å€™æœƒæ¡ç”¨Â utf8mb4Â ä½œç‚º MySQL çš„ç·¨ç¢¼ï¼Ÿ","ç‚ºä»€éº¼-rails-æ”¹ç”¨utf8mb4ç·¨ç¢¼å°±æœƒè¶…éé•·åº¦å‘¢","ç‚ºä»€éº¼ Rails æ”¹ç”¨Â utf8mb4Â ç·¨ç¢¼å°±æœƒè¶…éé•·åº¦å‘¢ï¼Ÿ","è§£æ±ºæ–¹æ¡ˆ-1","è§£æ±ºæ–¹æ¡ˆ (1)","# config\u002Finitializers\u002Fmysqlpls.rb\nrequire 'active_record\u002Fconnection_adapters\u002Fabstract_mysql_adapter'\n\nmodule ActiveRecord\n  module ConnectionAdapters\n    class AbstractMysqlAdapter\n      NATIVE_DATABASE_TYPES[:string] = { :name =\u003E \"varchar\", :limit =\u003E 191 }\n    end\n  end\nend\n","NATIVE_DATABASE_TYPES = {\n  primary_key: \"int auto_increment PRIMARY KEY\",\n  string:      { name: \"varchar\", limit: 255 },\n  text:        { name: \"text\" },\n  integer:     { name: \"int\", limit: 4 },\n  float:       { name: \"float\" },\n  decimal:     { name: \"decimal\" },\n  datetime:    { name: \"datetime\" },\n  time:        { name: \"time\" },\n  date:        { name: \"date\" },\n  binary:      { name: \"blob\" },\n  boolean:     { name: \"tinyint\", limit: 1 },\n  json:        { name: \"json\" },\n}\n","è§£æ±ºæ–¹æ¡ˆ-2","è§£æ±ºæ–¹æ¡ˆ (2)","æ–¹å‘-1","æ–¹æ³•-1","[mysqld]\ninnodb_file_format = Barracuda\ninnodb_file_per_table = 1\ninnodb_large_prefix\n","create_table :table_name, options: 'ROW_FORMAT=DYNAMIC' do |t|\n  ...\n","ActiveSupport.on_load :active_record do\n  module ActiveRecord::ConnectionAdapters   \n    class AbstractMysqlAdapter \n      def create_table_with_innodb_row_format(table_name, options = {}) \n        table_options = options.reverse_merge(:options =\u003E 'ENGINE=InnoDB ROW_FORMAT=DYNAMIC')\n\n        create_table_without_innodb_row_format(table_name, table_options) do |td|\n         yield td if block_given? \n        end\n      end\n      alias_method_chain :create_table, :innodb_row_format \n    end\n  end\nend\n","ç¸½çµ-1","é™„éŒ„unicode-èˆ‡-utf","é™„éŒ„ï¼šUnicode èˆ‡ UTF","utf-8","UTF-8","è§£æ±º MySQL ä½¿ç”¨ utf8mb4 ç·¨ç¢¼å°è‡´ Rails è³‡æ–™åº«é·ç§»å¤±æ•—çš„å•é¡Œ","root","http:\u002F\u002Fblog.fntsr.tw\u002Farticles\u002F293\u002F","è§£æ±º MySQL ä½¿ç”¨ utf8mb4 ç·¨ç¢¼å°è‡´ Rails è³‡æ–™åº«é·ç§»å¤±æ•—çš„å•é¡Œ - æ·±è—è‹¥è™›","ç•¶ MySQL ä½¿ç”¨Â utf8mb4Â ç·¨ç¢¼ï¼Œæœƒå°è‡´ Rails è³‡æ–™åº«é·ç§»å¤±æ•—ï¼Œä¸¦è¼¸å‡ºæ­¤éŒ¯èª¤è¨Šæ¯çš„å•é¡Œï¼š","ä¸Šé¢é‚£æ®µè¨Šæ¯çš„é‡é»åœ¨æ–¼ï¼š","ä¹Ÿå°±èªªï¼Œä½œç‚º index çš„æ¬„ä½ï¼Œä»–çš„é•·åº¦ï¼ˆbytesï¼‰å·²ç¶“è¶…é MySQL è¦å®šçš„ 767 bytes äº†ï¼Œæ‰€ä»¥è¢« MySQL æ‹’çµ•ç¹¼çºŒé€²è¡Œæ“ä½œã€‚","åœ¨ä¸€èˆ¬çš„æƒ…æ³ä¸‹ï¼Œå…¶å¯¦Â utf8Â ç·¨ç¢¼å°±å·²ç¶“å¾ˆå¤ ç”¨äº†ï¼Œç„¶è€Œåœ¨ MySQL 6.0 å‰ï¼ŒÂ ä½¿ç”¨Â utf8Â ä¸€å€‹å­—å…ƒæœ€å¤šåªä½¿ç”¨ 3-Byteï¼Œæ‰€ä»¥ä»–ä¸¦ä¸èƒ½è¡¨é”æ‰€æœ‰ unicode çš„å­—ç¬¦ã€‚è‹¥æ˜¯ä½ çš„ç¶²ç«™æœƒä½¿ç”¨çš„ä¸€äº›ç½•è¦‹å­—ç¬¦æˆ–æ˜¯æœ‰ä½¿ç”¨è€…æ˜¯ç”¨ç½•è¦‹å­—å…ƒç•¶åšäººåï¼Œå°±å¯èƒ½æœƒä¸åœ¨Â utf8Â æ‰€æ”¯æ´çš„å­—ç¬¦ä¸­ã€‚æ‰€ä»¥åœ¨ MySQL 5.5 æ™‚ï¼Œæ–°å¢äº†Â utf8mb4Â ä½œç‚ºæ“´å……ï¼Œä½¿æœ€å¤§ä½”ç”¨é•·åº¦å¢ç‚º 4-byteã€‚","æˆ–è¨±ä½ æœƒä»¥ç‚ºé€™ç¨®æƒ…æ³é›¢ç”Ÿæ´»å¾ˆé ï¼Œä½†äº‹å¯¦ä¸Šåœ¨é€™å€‹è¡Œå‹•è£ç½®éš¨è™•å¯è¦‹çš„æƒ…æ³ä¸‹ï¼Œé€™ç¨®æƒ…æ³åè€Œæ›´å®¹æ˜“ç™¼ç”Ÿã€‚ç‚ºä»€éº¼ï¼Ÿå› ç‚ºç¾åœ¨æ‰‹æ©Ÿã€å¹³æ¿ç­‰çš„è¼¸å…¥æ³•ï¼Œéƒ½å¤šæœƒé™„ä¸Šè¡¨æƒ…ç¬¦è™Ÿè«¸å¦‚Â [ğŸ˜][ğŸ˜€][ğŸ˜][ğŸ˜‚][ğŸ˜ƒ][ğŸ˜„][ğŸ˜…]","ğŸ˜†","ï¼Œé€™ 8 å€‹è¡¨ç¬¦éƒ½å„ä½”äº† 4-byteï¼Œä¹Ÿå°±æ˜¯è¶…éÂ utf8Â çš„æ”¯æ´ã€‚æˆ‘æƒ³è®€è€…æ‡‰è©²å°é€™äº›ç¬¦è™Ÿéƒ½æŒºæœ‰å°è±¡çš„ï¼Œæ‰€ä»¥é€™ç¨®æ¡ç”¨Â utf8mb4Â ä½œç‚º MySQL çš„ç·¨ç¢¼çš„éœ€æ±‚å…¶å¯¦æ˜¯é›¢æˆ‘å€‘é–‹ç™¼è€…è¶Šä¾†è¶Šè¿‘ã€‚","é‚£æ˜¯å› ç‚º Rails ActiveRecord çš„Â ","Â è³‡æ–™æ¬„ä½ï¼Œç­‰åŒæ–¼ MySQL é•·åº¦ç‚º 255 çš„Â VARCHARÂ æ¬„ä½é¡å‹ï¼Œæ‰€ä»¥ä½¿ç”¨Â utf8Â æ™‚ï¼Œæœƒä½¿ç”¨Â ","255 * 3 = 765","Â (bytes)ã€‚","ç•¶ç·¨ç¢¼æ”¹æˆÂ utf8mb4Â å¾Œï¼Œæ¯å€‹å­—å…ƒå›ºå®šé•·åº¦ç‚º 4-byteï¼Œæ‰€ä»¥å¤§å°å°±æœƒæœ‰Â ","255 * 4 = 1020","Â (bytes)Â ï¼Œè€Œè¶…é MySQL ç”¨ä¾†ç•¶ä½œç´¢å¼•çš„éµå€¼é•·åº¦çš„æœ€å¤§å€¼ã€‚é€™ä¹Ÿå°±æ˜¯ç‚ºä»€éº¼åœ¨è³‡æ–™åº« Migrate æœƒå ±éŒ¯çš„åŸå› æ‰€åœ¨ã€‚","é‚£æˆ‘å€‘è©²å¦‚ä½•è§£æ±ºé€™å€‹å•é¡Œå‘¢ï¼Ÿ","em","é€™è£¡æä¾›çš„æ–¹æ¡ˆåƒ…é™æ–¼ç›®å‰ç¶²ç«™åœ¨é–‹ç™¼ï¼Œä¸¦æ²’æœ‰æ“æœ‰éœ€è¦ä¿å­˜è³‡æ–™çš„æƒ…æ³ä¸‹æ‰èƒ½å¯¦è¡Œ","ã€‚å› ç‚ºé€™å€‹æ–¹æ¡ˆæ˜¯é€éä¿®æ”¹ Rails åœ¨è³‡æ–™è¡¨æ¶æ§‹ä¸Šï¼ŒVARCHAR é¡å‹æ¬„ä½çš„é è¨­é•·åº¦ã€‚è‹¥æ˜¯å·²ç¶“æœ‰è³‡æ–™çš„ç¶²ç«™ï¼Œå¯èƒ½æœƒå› ç‚ºä¿®æ”¹é•·åº¦æ¯”ç¾å­˜çš„è³‡æ–™å°ï¼Œå°è‡´ç„¡æ³•åŸ·è¡Œã€‚","æ‰¿è¥²ä¸Šç« æ‰€é—¡è¿°çš„å•é¡ŒåŸå› ï¼Œç‚ºäº†æ”¹å–„é€™å€‹å•é¡Œï¼Œæˆ‘å€‘åœ¨é€™è£¡å°‡Â VARCHARÂ çš„é•·åº¦æ”¹æˆéµå€¼é•·åº¦æœ€å¤§å€¼ä»¥å…§ã€‚ç”±ç®—å¼Â ","767 \u002F 4 = 191 ... 3","Â å¯å¾—çŸ¥ï¼Œåœ¨é€™å€‹ç¯„åœå…§è‹¥ä»¥ 4-byte ä¾†å„²å­˜ 1 å€‹å­—ç¬¦ï¼Œæˆ‘å€‘å…±å¯ä»¥å„²å­˜ 191 å€‹å­—ç¬¦ï¼Œæœ€å¤§é•·åº¦å°±åªæœƒåˆ° 764 bytesï¼Œç¬¦åˆ MySQL æ¨™æº–ï¼Œå› è€Œè§£æ±ºé€™å€‹å•é¡Œã€‚æ‰€ä»¥è§£æ±ºæ–¹å‘å°±å¦‚å‰é¢æ‰€è¿°ï¼Œè¦å°‡ Rails çš„Â VARCHARÂ é¡å‹æ¬„ä½çš„é è¨­é•·åº¦æ”¹æˆ 191 å€‹å­—ç¬¦ã€‚","é€™å€‹æ–¹æ³•ä¾†è‡ªæ–¼ Github Rails\u002FRails å°ˆæ¡ˆä¸­çš„Â ","Issue #9885","Â ä¸­ @nanaya çš„ç•™è¨€ã€‚","æˆ‘å€‘åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹æ–°å¢Â ",".\u002Fconfig\u002Finitializers\u002Fmysqlpls.rb","Â é€™å€‹æª”æ¡ˆï¼Œç„¶å¾Œå°‡ä¸‹é¢çš„ç¨‹å¼ç¢¼è²¼è¿‘æª”æ¡ˆä¸­å„²å­˜ï¼Œå°±æœƒå°‡Â VARCHARÂ é¡å‹æ¬„ä½çš„é è¨­é•·åº¦å¾ 255 å€‹å­—ç¬¦æ”¹æˆ 191 å€‹å­—ç¬¦ï¼Œè§£æ±ºäº†é€™å€‹å•é¡Œã€‚","é€™å€‹ç¨‹å¼ç¢¼ä¸»è¦æ˜¯è¦†è“‹æ‰åŸæœ¬ Rails åœ¨é€™éƒ¨åˆ†çš„è¨­å®šï¼Œä¹Ÿå°±æ˜¯èªªæˆ‘è¦é‡å° ActiveRecord module ä¸‹çš„ ConnectionAdapters module ä¸­çš„ AbstractMysqlAdapter Class è£¡çš„ NATIVE_DATABASE_TYPES é›œæ¹Šå¸¸æ•¸ä¸­çš„Â ","Â éµå€¼æ‰€ä»£è¡¨çš„å€¼åšé‡æ–°å®šç¾©ã€‚è¬›å¾—é€™éº¼å¯†éº»éº»ï¼Œå¯èƒ½æœ‰é»ä¸æ‡‚ï¼Œæˆ‘å€‘å¯ä»¥å…ˆçœ‹çœ‹åŸå§‹é‡å°é€™éƒ¨ä»½çš„å®šç¾©ï¼Œå¦‚ä¸‹","é€™éƒ¨ä»½å°±æ˜¯å°‡ migration ä¸­å®šç¾©çš„è³‡æ–™é¡å‹è½‰æˆ MySQL çš„æ¬„ä½é¡å‹ï¼Œè€Œæˆ‘å€‘å°±æ˜¯å°‡åŸæœ¬ ","string"," é¡å‹å®šç¾©çš„é•·åº¦åšäº†ä¿®æ”¹ä¸¦è¦†è“‹ã€‚é€™æ¨£è§£é‡‹æ‡‰è©²å¥½æ‡‚å¾ˆå¤šã€‚æƒ³è¦æ›´æ·±å…¥äº†è§£çš„å¯ä»¥ç›´æ¥çœ‹ Rails é—œæ–¼é€™éƒ¨åˆ†çš„","https:\u002F\u002Fgithub.com\u002Frails\u002Frails\u002Fblob\u002Fmaster\u002Factiverecord\u002Flib\u002Factive_record\u002Fconnection_adapters\u002Fabstract_mysql_adapter.rb#L37","åŸå§‹ç¢¼","å›‰ã€‚","æœ¬è§£æ±ºæ–¹æ¡ˆæ˜¯ç›´æ¥ç¸®æ¸› Rails åœ¨ ActvieRecord è£¡Â ","Â è³‡æ–™é¡å‹ä¸­çš„é•·åº¦ï¼Œä»¥ç¬¦åˆ MySQL æ‰€æ”¯æ´çš„å¤§å°ã€‚","ä½†å¦‚å‰é¢æ‰€è¿°ï¼Œè‹¥æ˜¯ä½ å·²ç¶“æœ‰è³‡æ–™ï¼Œä¸”ä½ ç„¡æ³•ç¢ºä¿ç¾æœ‰è³‡æ–™ä¸­Â ","Â è³‡æ–™é¡å‹çš„å€¼éƒ½åœ¨ 191 ä»¥ä¸‹çš„è©±ï¼Œå°±æœƒæ¯”è¼ƒéº»ç…©ã€‚å¯èƒ½å°±è¦å…ˆå°‡çµæ§‹èˆ‡è³‡æ–™åˆ†åˆ¥ dumpï¼Œæ”¹å®Œçµæ§‹å¾Œï¼Œå†å°‡è³‡æ–™ä¸­è¶…éé•·åº¦çš„å€¼åšç¸®æ¸›ï¼Œæœ€å¾Œå†é‡æ–° import åˆ°è³‡æ–™åº«è£¡ã€‚é€™éƒ¨åˆ†å¯åƒè€ƒ XDite é—œæ–¼é€™éƒ¨åˆ†æ‰€æ›¸å¯«çš„","http:\u002F\u002Fblog.xdite.net\u002Fposts\u002F2013\u002F12\u002F19\u002Fmysql-with-utf8mb4","éƒ¨è½æ ¼æ–‡ç« ","é€™å€‹æ–¹æ¡ˆæˆ‘ä¸æ‰“ç®—å¦‚å‰ä¸€å€‹æ–¹æ¡ˆèˆ¬è©³è¿°ï¼Œä¸»è¦æ˜¯å› ç‚ºæˆ‘æ²’æœ‰å¯¦éš›å»å¯¦é©—ï¼Œè€Œåªæ˜¯å°‡ç¶²è·¯ä¸Šçœ‹åˆ°çš„è³‡æ–™åšå€‹æ•´ç†ã€ç­†è¨˜è€Œå·²ï¼Œå¯¦éš›é‹ä½œä¸Šç‹€æ³å¦‚ä½•ï¼Œå°±ä¸æ•¢ä¿è­‰äº†ï¼Œä½†è‡³å°‘ç´€éŒ„äº†ä¸€å€‹æ–¹å‘ã€‚","åœ¨ MySQL 5.5.14 æ™‚ï¼Œæ–°å¢äº†ä¸€å€‹åç‚ºÂ ","innodb_large_prefix","Â çš„åŠŸèƒ½ï¼Œå•Ÿç”¨å¾Œå¯å°‡éµå€¼é•·åº¦æ“´å……åˆ° 3072 bytesã€‚è€Œé€™å€‹åŠŸèƒ½ç›¸ä¾æ–¼ MySQL 5.5 æ–°å¢çš„ä¸€å€‹å«åš Barracuda çš„ innodb çš„æª”æ¡ˆæ ¼å¼ï¼ˆFile Formateï¼‰ï¼Œé€™å€‹æª”æ¡ˆæ ¼å¼é™¤äº†æ”¯æ´ innodb åŸæœ‰çš„è³‡æ–™åˆ—æ ¼å¼ï¼ˆRow Formatsï¼‰ï¼Œé‚„åŒ…æ‹¬äº†æ–°çš„è³‡æ–™åˆ—æ ¼å¼ï¼šCOMPRESSED å’Œ DYNAMICã€‚","æ‰€ä»¥è¦è§£æ±ºé€™å€‹å•é¡Œï¼Œå°±æ˜¯ä¿®æ”¹ MySQL çš„é¸é …ï¼Œå°‡æª”æ¡ˆæ ¼å¼æ”¹æˆ Barracudaï¼Œä¸¦ä¸”å•Ÿç”¨ innodb_large_prefix é€™å€‹é¸é …å»æ“´å……éµå€¼é•·åº¦ã€‚æœ€å¾Œåœ¨ Rails å»ºç«‹è¡¨æ ¼æ™‚ï¼ŒæŒ‡å®šä½¿ç”¨ DYNAMIC çš„è³‡æ–™åˆ—æ ¼å¼å³å¯ã€‚","strong","åœ¨é€²è¡Œæœ¬æ–¹æ³•å‰ï¼Œè«‹å…ˆå°‡è³‡æ–™åº«å‚™ä»½ï¼Œæˆ–æ˜¯ä½¿ç”¨è™›æ“¬æ©Ÿå™¨æˆ–æ˜¯å®¹å™¨é–‹ä¸€å€‹æ–°çš„è³‡æ–™åº«ä¼ºæœå™¨ä½œç‚ºç·´ç¿’ã€è©¦é©—","åœ¨ MySQL çš„è¨­å®šæª”Â ","my.conf","Â åŠ å…¥ä¸‹é¢å…§å®¹ï¼š","åœ¨ Rails éƒ¨åˆ†æœ‰å…©å€‹é¸é …ï¼Œæ“‡ä¸€å³å¯ï¼Œè¦‹ä»è¦‹æ™ºã€‚æœ‰èˆˆè¶£çš„å¯ä»¥åƒè€ƒåœ¨åŒä¸€ç¯‡ Issue è£¡ï¼Œå¾","https:\u002F\u002Fgithub.com\u002Frails\u002Frails\u002Fissues\u002F9855#issuecomment-57666389","é€™ç¯‡å›è¦†","é–‹å§‹çš„è¨è«–ï¼Œä¸»è¦å°±æ˜¯ @NaN1488 å’Œ @yyyc514 å…©äººå›è¦†çš„éƒ¨åˆ†ã€‚","rails-1","Rails (1)","åœ¨ migration ä¸­çš„Â ","create_table","Â æ–¹æ³•åŠ å…¥Â ","option","Â åƒæ•¸ï¼š","rails-2","Rails (2)","è‹¥æ˜¯è¦ºå¾—è¦åœ¨æ¯å€‹æœ‰å»ºç«‹è³‡æ–™è¡¨çš„ migration ä¸€ä¸€åŠ å…¥ä¸Šè¿°é¸é …çš„åƒæ•¸å¤ªéº»ç…©çš„è©±ï¼Œä¹Ÿå¯ä»¥ç›´æ¥åŠ å…¥ä¸€å€‹ MonkeyPatchã€‚é€™å€‹ patch æœƒå¹«ä½ åœ¨å»ºç«‹è³‡æ–™è¡¨æ™‚ç›´æ¥å¹«ä½ åŠ å…¥è©²åƒæ•¸ã€‚","åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹æ–°å¢Â ",".\u002Fconfig\u002Finitializers\u002Far_innodb_row_format.rb","Â é€™å€‹æª”æ¡ˆï¼Œä¸¦è²¼ä¸Šç¨‹å¼ç¢¼ï¼š","èˆ‡å‰ä¸€æ–¹æ¡ˆæ˜¯é€éä¿®æ”¹ Rails å° string æ¬„ä½é¡å‹çš„é è¨­é•·åº¦é”åˆ°ç›®çš„ï¼Œé€™å€‹æ–¹æ¡ˆå‰‡æ˜¯é€éå‡ç´šã€ä¿®æ”¹ MySQL çš„è¨­å®šæª”ï¼Œæ“´å¤§éµå€¼é•·åº¦å»ä¿®æ­£é€™å€‹éŒ¯èª¤ã€‚","å…©å€‹æ–¹æ¡ˆæ–¹å‘ä¸ä¸€æ¨£ï¼Œæ‰€ä»¥ä¹Ÿæ²’æœ‰å­°å„ªå­°åŠ£ï¼Œå°±çœ‹é–‹ç™¼è€…ç•¶å‰çš„å°ˆæ¡ˆé©åˆå“ªå€‹æ–¹æ¡ˆäº†ã€‚è‹¥æ˜¯æ²’æœ‰è³‡æ–™åº«ä¿®æ”¹æ¬Šé™çš„ï¼Œç¬¬ä¸€å€‹æ–¹æ¡ˆæˆ‘æƒ³å°±æ˜¯ä¸€å€‹æŒºè²¼åˆ‡çš„åšæ³•ï¼Œä¹Ÿè®“å°ˆæ¡ˆåœ¨éƒ¨ç½²çš„é›£åº¦é™ä½ã€‚è‹¥æ˜¯æ“æœ‰è³‡æ–™åº«ä¼ºæœå™¨ç®¡ç†æ¬Šé™ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç¬¬äºŒå€‹æ–¹æ¡ˆï¼Œç›´æ¥ä¸€å‹æ°¸é€¸å›‰ã€‚","Unicode æ˜¯ä¸€ç¨®æ–‡å­—ã€ç¬¦è™Ÿåœ¨é›»è…¦ç§‘å­¸é ˜åŸŸçš„æ¥­ç•Œæ¨™æº–ï¼Œç”±éç‡Ÿåˆ©æ©Ÿæ§‹ The Unicode Consortium è² è²¬ã€‚åœ¨ 1991 å¹´ 10æœˆç™¼å¸ƒç¬¬ä¸€å€‹ç‰ˆæœ¬ï¼Œéš”å¹´ 6 æœˆç™¼å¸ƒ 1.0.1 æ“´å¢äº†ä¸­æ—¥éŸ“çµ±ä¸€è¡¨æ„æ–‡å­—æœ€åˆçš„ 20,902 å€‹å­—ï¼Œä¹‹å¾Œé™¸é™¸çºŒéœ€ç·¨ä¿®èˆ‡æ“´å¢ã€‚æœ€è¿‘çš„ç™¼å¸ƒæ˜¯åœ¨ 2015 å¹´ 6 æœˆæ™‚çš„ 8.0 ç‰ˆæœ¬ï¼Œç¸½è¨ˆæœ‰ 120,737 å€‹å­—ç¬¦ã€‚","UTF ç‚º Unicode Transformation Formatï¼Œä¸­æ–‡ç‚º Unicodeè½‰æ›æ ¼å¼ï¼Œå³ç‚º Unicode çš„å¯¦ä½œæ–¹å¼ã€‚","UTF-8 çš„å…¨åç‚º 8-bit Unicode Transformation Formatï¼Œå³ä»¥ 1 å€‹ä½å…ƒçµ„ï¼ˆ1-byte = 8-bitï¼‰ç‚ºå–®ä½ï¼Œç”¨ 1 åˆ° 4 å€‹ä½å…ƒçµ„è¡¨ç¤ºä¸€å€‹å­—ç¬¦ç·¨ç¢¼","http:\u002F\u002Fblog.fntsr.tw\u002Farticles\u002F293\u002F#fn-293-2","1","ç”±æ–¼ UTF-8 çš„é•·åº¦æ˜¯å¯è®Šå‹•çš„ï¼Œæ‰€ä»¥ ASCII å¯ä»¥ä½œç‚º UTF-8 çš„ä¸€å€‹å­é›†ï¼Œæ‰€ä»¥ç¾å­˜çš„ ASCII æ–‡å­—ä¸éœ€è¦è½‰æ›ã€‚","utf8mb3utf8mb4","utf8mb3ã€utf8mb4","utf8mb3ã€utf8mb4Â éƒ½æ˜¯ MySQL æ‰€æ”¯æ´çš„ Unicode ç·¨ç¢¼å¯¦ä½œï¼Œå…©è€…çš„å·®åˆ¥åœ¨æ–¼Â utf8mb3Â æœ€å¤§ä½”ç”¨é•·åº¦ç‚º 3-byteï¼Œutf8mb4Â å‰‡ç‚º 4-byteã€‚æ‰€ä»¥å…¶å¯¦å…©è€…å¹¾ä¹æ˜¯ä¸€æ¨£çš„ï¼Œä½†æ˜¯Â utf8mb4Â å¤šäº†å°æ“´å……å­—ç¬¦çš„æ”¯æŒï¼Œå¦‚æœ¬ç¯‡æ–‡ç« æ‰€æåˆ°çš„è¡¨æƒ…ç¬¦è™Ÿã€‚","utf8mb4Â æ˜¯ MySQL 5.5 æ‰€æ–°å¢çš„ï¼Œå› ç‚ºåŸæœ¬ MySQL 5.5 çš„Â utf8Â åªæœ‰æ”¯æŒæœ€å¤§ä½”ç”¨é•·åº¦ç‚º 3-byteï¼Œæ‰€ä»¥æ–°å¢é€™å€‹å¯¦ä½œä½œç‚ºæ“´å……ã€‚åˆ°äº† MySQL 6.0ï¼ŒåŸæœ¬çš„Â utf8Â è¢«æ›´åç‚º utf8mb3ï¼Œä¸¦åŠ å…¥æ–°çš„Â utf8Â ç·¨ç¢¼å¯¦ä½œï¼Œä¸¦é è¨­æ”¯æœ€å¤§ä½”ç”¨é•·åº¦ç‚º 4-byteã€‚","http:\u002F\u002Fblog.fntsr.tw\u002Farticles\u002F293\u002F#fn-293-3","2","MySQLÂ utf8mb4Â breaks ActiveRecord schema setup","https:\u002F\u002Fmathiasbynens.be\u002Fnotes\u002Fmysql-utf8mb4","How to support full Unicode in MySQL databases","https:\u002F\u002Fencoding.spec.whatwg.org\u002F#utf-8","Encoding: Living Standard","http:\u002F\u002Fwww.utf8-chartable.de\u002Funicode-utf8-table.pl?start=128512","UTF-8 encoding table and Unicode characters","https:\u002F\u002Fmothereff.in\u002Fbyte-counter","UTF-8 string length & byte counter","http:\u002F\u002Fblog.kamipo.net\u002Fentry\u002F2012\u002F11\u002F13\u002F102024","MySQL(InnoDB) ã§ â€œIndex column size too large. The maximum column size is 767 bytes.â€ ã„ã‚ã‚Œã‚‹ã¨ãã®å¯¾ç­–","hr","åŸä¾†çš„è¦ç¯„å…è¨±é•·é” 6 ä½å…ƒçµ„ï¼Œä½†æ˜¯åœ¨ 2003 å¹´ 11 æœˆ UTF-8 è¢« RFCÂ 3629 é‡æ–°è¦ç¯„ï¼Œåªèƒ½ä½¿ç”¨åŸä¾† Unicode å®šç¾©çš„å€åŸŸï¼Œå³Â ","U+0000","Â åˆ°Â ","U+10FFFF","Â ã€‚Â ","http:\u002F\u002Fblog.fntsr.tw\u002Farticles\u002F293\u002F#fnref-293-2","é€™éƒ¨åˆ†å¯ä»¥åƒç…§Â ","http:\u002F\u002Fforums.mysql.com\u002Fread.php?3,199803,199803","MySQL 6.0.4 Alpha çš„ Release Note","ã€‚Â ","http:\u002F\u002Fblog.fntsr.tw\u002Farticles\u002F293\u002F#fnref-293-3","MySQL utf8mb4 breaks ActiveRecord schema setup",null))