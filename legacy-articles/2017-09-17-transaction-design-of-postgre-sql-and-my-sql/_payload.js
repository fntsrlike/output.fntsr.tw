export default (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,$,aa,ab,ac,ad,ae,af,ag,ah,ai,aj,ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA,aB,aC,aD,aE,aF,aG,aH,aI,aJ,aK,aL,aM,aN,aO,aP,aQ,aR,aS,aT,aU,aV,aW,aX,aY,aZ,a_,a$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS,bT,bU,bV,bW,bX,bY,bZ,b_,b$,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cA,cB,cC,cD,cE,cF,cG,cH,cI,cJ,cK,cL,cM,cN,cO,cP,cQ,cR,cS,cT,cU,cV,cW,cX,cY,cZ,c_,c$,da,db,dc,dd,de,df,dg,dh){return {data:{"content-query-87RyKyaik7":{_path:"\u002Flegacy-articles\u002F2017-09-17-transaction-design-of-postgre-sql-and-my-sql",_dir:"legacy-articles",_draft:ah,_partial:ah,_locale:"en",_empty:ah,title:au,description:k,excerpt:{type:av,children:[{type:b,tag:c,props:{},children:[{type:a,value:aw},{type:b,tag:h,props:{href:K,rel:[j]},children:[{type:a,value:L}]},{type:a,value:ax}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:ay}]}]},{type:b,tag:c,props:{},children:[{type:a,value:az},{type:b,tag:f,props:{},children:[{type:a,value:M}]},{type:a,value:aA},{type:b,tag:h,props:{href:N,rel:[j]},children:[{type:a,value:O}]},{type:a,value:aB}]},{type:b,tag:q,props:{id:w},children:[{type:a,value:w}]},{type:b,tag:c,props:{},children:[{type:a,value:aC},{type:b,tag:h,props:{href:K,rel:[j]},children:[{type:a,value:L}]},{type:a,value:aD}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:aE}]}]},{type:b,tag:c,props:{},children:[{type:a,value:aF},{type:b,tag:x,props:{},children:[{type:b,tag:h,props:{href:aG,ariaDescribedBy:r,dataFootnoteRef:o,id:aH},children:[{type:a,value:t}]}]},{type:a,value:aI}]},{type:b,tag:c,props:{},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{},children:[{type:a,value:aK}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:u}]},{type:a,value:aL}]},{type:b,tag:g,props:{code:ai},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:a,value:ai}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:aM},{type:b,tag:h,props:{href:aN,rel:[j]},children:[{type:a,value:t}]},{type:a,value:P}]},{type:b,tag:c,props:{},children:[{type:a,value:aO},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:Q},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:aP}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:aQ}]},{type:a,value:aR}]},{type:b,tag:g,props:{code:y},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:a,value:y}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:aS},{type:b,tag:f,props:{},children:[{type:a,value:R}]},{type:a,value:P}]},{type:b,tag:q,props:{id:aj},children:[{type:a,value:ak}]},{type:b,tag:c,props:{},children:[{type:a,value:aT}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:aU}]}]},{type:b,tag:c,props:{},children:[{type:a,value:aV}]},{type:b,tag:c,props:{},children:[{type:a,value:aW},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:Q},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:aX},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:aY},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:aZ}]},{type:b,tag:c,props:{},children:[{type:a,value:a_},{type:b,tag:e,props:{},children:[{type:a,value:u}]},{type:a,value:a$},{type:b,tag:e,props:{},children:[{type:a,value:z}]},{type:a,value:A}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:z}]},{type:a,value:ba}]},{type:b,tag:g,props:{code:al},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:a,value:al}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:bb}]},{type:b,tag:c,props:{},children:[{type:a,value:bc}]},{type:b,tag:B,props:{id:S},children:[{type:a,value:S}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:bd},{type:b,tag:d,props:{},children:[{type:a,value:T}]},{type:a,value:be},{type:b,tag:d,props:{},children:[{type:a,value:T}]},{type:a,value:bf},{type:b,tag:n,props:{},children:[]},{type:a,value:bg},{type:b,tag:n,props:{},children:[]},{type:a,value:bh},{type:b,tag:n,props:{},children:[]},{type:a,value:bi},{type:b,tag:n,props:{},children:[]},{type:a,value:bj}]}]},{type:b,tag:B,props:{id:U},children:[{type:a,value:U}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:bk}]}]},{type:b,tag:B,props:{id:V},children:[{type:a,value:V}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:bl}]}]},{type:b,tag:q,props:{id:am},children:[{type:a,value:an}]},{type:b,tag:c,props:{},children:[{type:a,value:bm}]},{type:b,tag:c,props:{},children:[{type:a,value:bn},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:b,tag:f,props:{},children:[{type:a,value:W}]},{type:a,value:bo},{type:b,tag:d,props:{},children:[{type:a,value:bp}]},{type:a,value:bq}]},{type:b,tag:c,props:{},children:[{type:a,value:br},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bs},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bt},{type:b,tag:e,props:{},children:[{type:a,value:u}]},{type:a,value:bu},{type:b,tag:e,props:{},children:[{type:a,value:X}]},{type:a,value:A}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:X}]},{type:a,value:bv}]},{type:b,tag:g,props:{code:ao},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:a,value:ao}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:bw},{type:b,tag:e,props:{},children:[{type:a,value:z}]},{type:a,value:bx},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:by},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:bz},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bA},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bB},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:bC},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bD},{type:b,tag:d,props:{},children:[{type:a,value:Y}]},{type:a,value:bE},{type:b,tag:e,props:{},children:[{type:a,value:Z}]},{type:a,value:bF}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:Z}]},{type:a,value:bG}]},{type:b,tag:g,props:{code:y},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:a,value:y}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:bH},{type:b,tag:f,props:{},children:[{type:a,value:_}]},{type:a,value:bI},{type:b,tag:d,props:{},children:[{type:a,value:bJ}]},{type:a,value:bK},{type:b,tag:d,props:{},children:[{type:a,value:$}]},{type:a,value:aa},{type:b,tag:d,props:{},children:[{type:a,value:bL}]},{type:a,value:bM},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bN},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:bO},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bP},{type:b,tag:d,props:{},children:[{type:a,value:$}]},{type:a,value:aa},{type:b,tag:d,props:{},children:[{type:a,value:t}]},{type:a,value:bQ},{type:b,tag:e,props:{},children:[{type:a,value:u}]},{type:a,value:bR},{type:b,tag:e,props:{},children:[{type:a,value:ab}]},{type:a,value:A}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:ab}]},{type:a,value:bS}]},{type:b,tag:g,props:{code:ap},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:a,value:ap}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:bT},{type:b,tag:h,props:{href:C,rel:[j]},children:[{type:a,value:bU}]},{type:a,value:bV},{type:b,tag:f,props:{},children:[{type:a,value:ac}]},{type:a,value:bW},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bX},{type:b,tag:x,props:{},children:[{type:b,tag:h,props:{href:bY,ariaDescribedBy:r,dataFootnoteRef:o,id:bZ},children:[{type:a,value:b_}]}]},{type:a,value:b$},{type:b,tag:e,props:{},children:[{type:a,value:ad}]},{type:a,value:ca}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:ad}]},{type:a,value:cb}]},{type:b,tag:g,props:{code:aq},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:a,value:aq}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:cc},{type:b,tag:x,props:{},children:[{type:b,tag:h,props:{href:cd,ariaDescribedBy:r,dataFootnoteRef:o,id:ce},children:[{type:a,value:cf}]}]},{type:a,value:cg},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:ch},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:ci},{type:b,tag:e,props:{},children:[{type:a,value:ae}]},{type:a,value:cj},{type:b,tag:d,props:{},children:[{type:a,value:ck}]},{type:a,value:cl}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:ae}]},{type:a,value:cm}]},{type:b,tag:g,props:{code:ar},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:a,value:ar}]}]}]},{type:b,tag:q,props:{id:D},children:[{type:a,value:D}]},{type:b,tag:c,props:{},children:[{type:a,value:cn},{type:b,tag:e,props:{},children:[{type:a,value:af}]},{type:a,value:co}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:af}]},{type:a,value:cp}]},{type:b,tag:g,props:{code:as},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:a,value:as}]}]}]},{type:b,tag:q,props:{id:E},children:[{type:a,value:E}]},{type:b,tag:c,props:{},children:[{type:a,value:cq}]},{type:b,tag:c,props:{},children:[{type:a,value:cr},{type:b,tag:h,props:{href:N,rel:[j]},children:[{type:a,value:O}]},{type:a,value:cs},{type:b,tag:h,props:{href:ct,rel:[j]},children:[{type:a,value:cu}]},{type:a,value:cv}]},{type:b,tag:cw,props:{},children:[]},{type:b,tag:c,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:M}]},{type:a,value:cx}]},{type:b,tag:cy,props:{className:[cz],dataFootnotes:o},children:[{type:b,tag:q,props:{id:r,className:[cA]},children:[{type:a,value:at}]},{type:b,tag:cB,props:{},children:[{type:b,tag:F,props:{id:cC},children:[{type:a,value:cD},{type:b,tag:h,props:{href:cE,rel:[j]},children:[{type:a,value:cF}]},{type:a,value:cG},{type:b,tag:h,props:{href:cH,rel:[j]},children:[{type:a,value:cI}]},{type:a,value:cJ},{type:b,tag:n,props:{},children:[]},{type:b,tag:f,props:{},children:[{type:a,value:R}]},{type:a,value:cK},{type:b,tag:d,props:{},children:[{type:a,value:Y}]},{type:a,value:cL},{type:b,tag:n,props:{},children:[]},{type:b,tag:f,props:{},children:[{type:a,value:W}]},{type:a,value:cM},{type:b,tag:d,props:{},children:[{type:a,value:cN}]},{type:a,value:cO},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:cP},{type:b,tag:n,props:{},children:[]},{type:b,tag:f,props:{},children:[{type:a,value:_}]},{type:a,value:cQ},{type:b,tag:n,props:{},children:[]},{type:b,tag:f,props:{},children:[{type:a,value:ac}]},{type:a,value:cR},{type:b,tag:d,props:{},children:[{type:a,value:cS}]},{type:a,value:G},{type:b,tag:d,props:{},children:[{type:a,value:cT}]},{type:a,value:G},{type:b,tag:d,props:{},children:[{type:a,value:cU}]},{type:a,value:cV},{type:b,tag:d,props:{},children:[{type:a,value:t}]},{type:a,value:cW},{type:b,tag:d,props:{},children:[{type:a,value:cX}]},{type:a,value:G},{type:b,tag:d,props:{},children:[{type:a,value:cY}]},{type:a,value:cZ},{type:b,tag:h,props:{href:c_,ariaLabel:H,className:[I],dataFootnoteBackref:o},children:[{type:a,value:J}]}]},{type:b,tag:F,props:{id:c$},children:[{type:b,tag:h,props:{href:C,rel:[j]},children:[{type:a,value:ag}]},{type:a,value:da},{type:b,tag:h,props:{href:db,ariaLabel:H,className:[I],dataFootnoteBackref:o},children:[{type:a,value:J}]}]},{type:b,tag:F,props:{id:dc},children:[{type:b,tag:h,props:{href:C,rel:[j]},children:[{type:a,value:ag}]},{type:a,value:dd},{type:b,tag:h,props:{href:de,ariaLabel:H,className:[I],dataFootnoteBackref:o},children:[{type:a,value:J}]}]}]}]}]},title_en:df,slug:"transaction-design-of-postgre-sql-and-my-sql",aliases:[au,df],created_at:"2017-09-17T10:41:53.000Z",published_at:dg,updated_at:dg,tags:["database","mysql","postgresql"],moc:["Information Technology"],body:{type:av,children:[{type:b,tag:c,props:{},children:[{type:a,value:aw},{type:b,tag:h,props:{href:K,rel:[j]},children:[{type:a,value:L}]},{type:a,value:ax}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:ay}]}]},{type:b,tag:c,props:{},children:[{type:a,value:az},{type:b,tag:f,props:{},children:[{type:a,value:M}]},{type:a,value:aA},{type:b,tag:h,props:{href:N,rel:[j]},children:[{type:a,value:O}]},{type:a,value:aB}]},{type:b,tag:q,props:{id:w},children:[{type:a,value:w}]},{type:b,tag:c,props:{},children:[{type:a,value:aC},{type:b,tag:h,props:{href:K,rel:[j]},children:[{type:a,value:L}]},{type:a,value:aD}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:aE}]}]},{type:b,tag:c,props:{},children:[{type:a,value:aF},{type:b,tag:x,props:{},children:[{type:b,tag:h,props:{href:aG,ariaDescribedBy:r,dataFootnoteRef:o,id:aH},children:[{type:a,value:t}]}]},{type:a,value:aI}]},{type:b,tag:c,props:{},children:[{type:a,value:aJ}]},{type:b,tag:c,props:{},children:[{type:a,value:aK}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:u}]},{type:a,value:aL}]},{type:b,tag:g,props:{code:ai},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:b,tag:f,props:{class:s},children:[{type:b,tag:f,props:{},children:[{type:a,value:"UPDATE accounts SET deposit = deposit - 30000.00 WHERE name = 'A';\nUPDATE accounts SET deposit = deposit + 30000.00 WHERE name = 'B';"}]}]}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:aM},{type:b,tag:h,props:{href:aN,rel:[j]},children:[{type:a,value:t}]},{type:a,value:P}]},{type:b,tag:c,props:{},children:[{type:a,value:aO},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:Q},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:aP}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:aQ}]},{type:a,value:aR}]},{type:b,tag:g,props:{code:y},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:b,tag:f,props:{class:s},children:[{type:b,tag:f,props:{},children:[{type:a,value:dh}]}]}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:aS},{type:b,tag:f,props:{},children:[{type:a,value:R}]},{type:a,value:P}]},{type:b,tag:q,props:{id:aj},children:[{type:a,value:ak}]},{type:b,tag:c,props:{},children:[{type:a,value:aT}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:aU}]}]},{type:b,tag:c,props:{},children:[{type:a,value:aV}]},{type:b,tag:c,props:{},children:[{type:a,value:aW},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:Q},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:aX},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:aY},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:aZ}]},{type:b,tag:c,props:{},children:[{type:a,value:a_},{type:b,tag:e,props:{},children:[{type:a,value:u}]},{type:a,value:a$},{type:b,tag:e,props:{},children:[{type:a,value:z}]},{type:a,value:A}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:z}]},{type:a,value:ba}]},{type:b,tag:g,props:{code:al},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:b,tag:f,props:{class:s},children:[{type:b,tag:f,props:{},children:[{type:a,value:"-- 本段程式碼的 BEGIN; 和 COMMIT; 都是 PostgreSQL 自動加的\nBEGIN;  \nUPDATE accounts SET deposit = deposit - 100.00 WHERE name = 'A';\nCOMMIT;\nBEGIN;\nUPDATE accounts SET deposit = deposit + 100.00 WHERE name = 'B';\nCOMMIT;"}]}]}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:bb}]},{type:b,tag:c,props:{},children:[{type:a,value:bc}]},{type:b,tag:B,props:{id:S},children:[{type:a,value:S}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:bd},{type:b,tag:d,props:{},children:[{type:a,value:T}]},{type:a,value:be},{type:b,tag:d,props:{},children:[{type:a,value:T}]},{type:a,value:bf},{type:b,tag:n,props:{},children:[]},{type:a,value:bg},{type:b,tag:n,props:{},children:[]},{type:a,value:bh},{type:b,tag:n,props:{},children:[]},{type:a,value:bi},{type:b,tag:n,props:{},children:[]},{type:a,value:bj}]}]},{type:b,tag:B,props:{id:U},children:[{type:a,value:U}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:bk}]}]},{type:b,tag:B,props:{id:V},children:[{type:a,value:V}]},{type:b,tag:p,props:{},children:[{type:b,tag:c,props:{},children:[{type:a,value:bl}]}]},{type:b,tag:q,props:{id:am},children:[{type:a,value:an}]},{type:b,tag:c,props:{},children:[{type:a,value:bm}]},{type:b,tag:c,props:{},children:[{type:a,value:bn},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:b,tag:f,props:{},children:[{type:a,value:W}]},{type:a,value:bo},{type:b,tag:d,props:{},children:[{type:a,value:bp}]},{type:a,value:bq}]},{type:b,tag:c,props:{},children:[{type:a,value:br},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bs},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bt},{type:b,tag:e,props:{},children:[{type:a,value:u}]},{type:a,value:bu},{type:b,tag:e,props:{},children:[{type:a,value:X}]},{type:a,value:A}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:X}]},{type:a,value:bv}]},{type:b,tag:g,props:{code:ao},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:b,tag:f,props:{class:s},children:[{type:b,tag:f,props:{},children:[{type:a,value:"-- 本段程式碼的 COMMIT; 都是 MySQL 自動加的\nUPDATE accounts SET deposit = deposit - 100.00 WHERE name = 'A';\nCOMMIT;\nUPDATE accounts SET deposit = deposit + 100.00 WHERE name = 'B';\nCOMMIT;"}]}]}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:bw},{type:b,tag:e,props:{},children:[{type:a,value:z}]},{type:a,value:bx},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:by},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:bz},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bA},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bB},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:bC},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bD},{type:b,tag:d,props:{},children:[{type:a,value:Y}]},{type:a,value:bE},{type:b,tag:e,props:{},children:[{type:a,value:Z}]},{type:a,value:bF}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:Z}]},{type:a,value:bG}]},{type:b,tag:g,props:{code:y},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:b,tag:f,props:{class:s},children:[{type:b,tag:f,props:{},children:[{type:a,value:dh}]}]}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:bH},{type:b,tag:f,props:{},children:[{type:a,value:_}]},{type:a,value:bI},{type:b,tag:d,props:{},children:[{type:a,value:bJ}]},{type:a,value:bK},{type:b,tag:d,props:{},children:[{type:a,value:$}]},{type:a,value:aa},{type:b,tag:d,props:{},children:[{type:a,value:bL}]},{type:a,value:bM},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bN},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:bO},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bP},{type:b,tag:d,props:{},children:[{type:a,value:$}]},{type:a,value:aa},{type:b,tag:d,props:{},children:[{type:a,value:t}]},{type:a,value:bQ},{type:b,tag:e,props:{},children:[{type:a,value:u}]},{type:a,value:bR},{type:b,tag:e,props:{},children:[{type:a,value:ab}]},{type:a,value:A}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:ab}]},{type:a,value:bS}]},{type:b,tag:g,props:{code:ap},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:b,tag:f,props:{class:s},children:[{type:b,tag:f,props:{},children:[{type:a,value:"SET autocommit=0;\n\nUPDATE accounts SET deposit = deposit - 100.00 WHERE name = 'A';\nUPDATE accounts SET deposit = deposit + 100.00 WHERE name = 'B';\nCOMMIT; -- COMMIT 並不會讓 autocommit 重新啟用\n\nUPDATE accounts SET deposit = deposit - 100.00 WHERE name = 'C';\nUPDATE accounts SET deposit = deposit + 100.00 WHERE name = 'D';\nROLLBACK; -- ROLLBACK 也不會讓 autocommit 重新啟用\n\nSET autocommit=1; -- 只有將 autocommit 設置為 1 時，才會重啟自動提交的功能。"}]}]}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:bT},{type:b,tag:h,props:{href:C,rel:[j]},children:[{type:a,value:bU}]},{type:a,value:bV},{type:b,tag:f,props:{},children:[{type:a,value:ac}]},{type:a,value:bW},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:bX},{type:b,tag:x,props:{},children:[{type:b,tag:h,props:{href:bY,ariaDescribedBy:r,dataFootnoteRef:o,id:bZ},children:[{type:a,value:b_}]}]},{type:a,value:b$},{type:b,tag:e,props:{},children:[{type:a,value:ad}]},{type:a,value:ca}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:ad}]},{type:a,value:cb}]},{type:b,tag:g,props:{code:aq},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:b,tag:f,props:{class:s},children:[{type:b,tag:f,props:{},children:[{type:a,value:"SET autocommit=0; -- 先停用自動提交\n\nINSERT INTO log (content) VALUES ('A');\n\nBEGIN; -- 執行此行敘述前，會進行隱性提交，導致前面的 SQL 敘述被存入硬碟。\nINSERT INTO log (content) VALUES ('B');\nCOMMIT;\n\nINSERT INTO log (content) VALUES ('C');\n\nSET autocommit=1; -- 執行此行敘述前，會進行隱性提交，導致前面的 SQL 敘述被存入硬碟。"}]}]}]}]}]},{type:b,tag:c,props:{},children:[{type:a,value:cc},{type:b,tag:x,props:{},children:[{type:b,tag:h,props:{href:cd,ariaDescribedBy:r,dataFootnoteRef:o,id:ce},children:[{type:a,value:cf}]}]},{type:a,value:cg},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:ch},{type:b,tag:d,props:{},children:[{type:a,value:i}]},{type:a,value:ci},{type:b,tag:e,props:{},children:[{type:a,value:ae}]},{type:a,value:cj},{type:b,tag:d,props:{},children:[{type:a,value:ck}]},{type:a,value:cl}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:ae}]},{type:a,value:cm}]},{type:b,tag:g,props:{code:ar},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:b,tag:f,props:{class:s},children:[{type:b,tag:f,props:{},children:[{type:a,value:"CREATE TABLE log (\n    content varchar(255)\n);\n\nBEGIN;\n    INSERT INTO log (content) VALUES ('First');\n\n    BEGIN;\n        INSERT INTO log (content) VALUES ('Second');\n        ROLLBACK;\n    COMMIT;\n\n    ROLLBACK;\nCOMMIT;"}]}]}]}]}]},{type:b,tag:q,props:{id:D},children:[{type:a,value:D}]},{type:b,tag:c,props:{},children:[{type:a,value:cn},{type:b,tag:e,props:{},children:[{type:a,value:af}]},{type:a,value:co}]},{type:b,tag:c,props:{},children:[{type:b,tag:e,props:{},children:[{type:a,value:af}]},{type:a,value:cp}]},{type:b,tag:g,props:{code:as},children:[{type:b,tag:l,props:{},children:[{type:b,tag:g,props:{__ignoreMap:k},children:[{type:b,tag:f,props:{class:s},children:[{type:b,tag:f,props:{},children:[{type:a,value:"BEGIN;\nINSERT INTO users (username, password) VALUES ('USERNAME_1', 'PASSWORD_1');\nINSERT INTO users (username, password) VALUES ('USERNAME_2', 'PASSWORD_2');\n-- ...\nINSERT INTO users (username, password) VALUES ('USERNAME_1000', 'PASSWORD_1000');\nCOMMIT;"}]}]}]}]}]},{type:b,tag:q,props:{id:E},children:[{type:a,value:E}]},{type:b,tag:c,props:{},children:[{type:a,value:cq}]},{type:b,tag:c,props:{},children:[{type:a,value:cr},{type:b,tag:h,props:{href:N,rel:[j]},children:[{type:a,value:O}]},{type:a,value:cs},{type:b,tag:h,props:{href:ct,rel:[j]},children:[{type:a,value:cu}]},{type:a,value:cv}]},{type:b,tag:cw,props:{},children:[]},{type:b,tag:c,props:{},children:[{type:b,tag:f,props:{},children:[{type:a,value:M}]},{type:a,value:cx}]},{type:b,tag:cy,props:{className:[cz],dataFootnotes:o},children:[{type:b,tag:q,props:{id:r,className:[cA]},children:[{type:a,value:at}]},{type:b,tag:cB,props:{},children:[{type:b,tag:F,props:{id:cC},children:[{type:a,value:cD},{type:b,tag:h,props:{href:cE,rel:[j]},children:[{type:a,value:cF}]},{type:a,value:cG},{type:b,tag:h,props:{href:cH,rel:[j]},children:[{type:a,value:cI}]},{type:a,value:cJ},{type:b,tag:n,props:{},children:[]},{type:b,tag:f,props:{},children:[{type:a,value:R}]},{type:a,value:cK},{type:b,tag:d,props:{},children:[{type:a,value:Y}]},{type:a,value:cL},{type:b,tag:n,props:{},children:[]},{type:b,tag:f,props:{},children:[{type:a,value:W}]},{type:a,value:cM},{type:b,tag:d,props:{},children:[{type:a,value:cN}]},{type:a,value:cO},{type:b,tag:d,props:{},children:[{type:a,value:m}]},{type:a,value:cP},{type:b,tag:n,props:{},children:[]},{type:b,tag:f,props:{},children:[{type:a,value:_}]},{type:a,value:cQ},{type:b,tag:n,props:{},children:[]},{type:b,tag:f,props:{},children:[{type:a,value:ac}]},{type:a,value:cR},{type:b,tag:d,props:{},children:[{type:a,value:cS}]},{type:a,value:G},{type:b,tag:d,props:{},children:[{type:a,value:cT}]},{type:a,value:G},{type:b,tag:d,props:{},children:[{type:a,value:cU}]},{type:a,value:cV},{type:b,tag:d,props:{},children:[{type:a,value:t}]},{type:a,value:cW},{type:b,tag:d,props:{},children:[{type:a,value:cX}]},{type:a,value:G},{type:b,tag:d,props:{},children:[{type:a,value:cY}]},{type:a,value:cZ},{type:b,tag:h,props:{href:c_,ariaLabel:H,className:[I],dataFootnoteBackref:o},children:[{type:a,value:J}]}]},{type:b,tag:F,props:{id:c$},children:[{type:b,tag:h,props:{href:C,rel:[j]},children:[{type:a,value:ag}]},{type:a,value:da},{type:b,tag:h,props:{href:db,ariaLabel:H,className:[I],dataFootnoteBackref:o},children:[{type:a,value:J}]}]},{type:b,tag:F,props:{id:dc},children:[{type:b,tag:h,props:{href:C,rel:[j]},children:[{type:a,value:ag}]},{type:a,value:dd},{type:b,tag:h,props:{href:de,ariaLabel:H,className:[I],dataFootnoteBackref:o},children:[{type:a,value:J}]}]}]}]}],toc:{title:k,searchDepth:v,depth:v,links:[{id:w,depth:v,text:w},{id:aj,depth:v,text:ak},{id:am,depth:v,text:an},{id:D,depth:v,text:D},{id:E,depth:v,text:E},{id:r,depth:v,text:at}]}},_type:"markdown",_id:"garden:legacy-articles:2017-09-17-transaction-design-of-postgre-sql-and-my-sql.md",_source:"garden",_file:"legacy-articles\u002F2017-09-17-transaction-design-of-postgre-sql-and-my-sql.md",_extension:"md"}},prerenderedAt:void 0}}("text","element","p","code-inline","strong","span","code","a","COMMIT;","nofollow","","pre","BEGIN;","br",true,"blockquote","h2","footnote-label","line","1","程式碼 1-1",2,"基本觀念","sup","BEGIN;\nUPDATE accounts SET deposit = deposit - 100.00 WHERE name = 'A';\nUPDATE accounts SET deposit = deposit + 100.00 WHERE name = 'B';\nCOMMIT;\n","程式碼 2-1","）：","h5","https:\u002F\u002Fdev.mysql.com\u002Fdoc\u002Frefman\u002F5.7\u002Fen\u002Fimplicit-commit.html","延伸應用","結論","li",", ","Back to content","data-footnote-backref","↩","https:\u002F\u002Fwww.postgresql.org\u002Fdocs\u002F9.6\u002Fstatic\u002Ftutorial-transactions.html","3.4 Transactions","^1","https:\u002F\u002Fgithub.com\u002Fdavid50407","@david50407","。"," 和 ","^3","問題一","dump.sql","問題二","問題三","^4","程式碼 3-1","ROLLBACK;","程式碼 3-2","^5","autocommit"," 設置為 ","程式碼 3-3","^6","程式碼 3-4","程式碼 3-5","程式碼 4-1","MySQL Ref 13.3.3",false,"UPDATE accounts SET deposit = deposit - 30000.00 WHERE name = 'A';\nUPDATE accounts SET deposit = deposit + 30000.00 WHERE name = 'B';\n","postgresql-關於-transaction-的設計理念","PostgreSQL 關於 transaction 的設計理念","-- 本段程式碼的 BEGIN; 和 COMMIT; 都是 PostgreSQL 自動加的\nBEGIN;  \nUPDATE accounts SET deposit = deposit - 100.00 WHERE name = 'A';\nCOMMIT;\nBEGIN;\nUPDATE accounts SET deposit = deposit + 100.00 WHERE name = 'B';\nCOMMIT;\n","與-mysql-比較","與 MySQL 比較","-- 本段程式碼的 COMMIT; 都是 MySQL 自動加的\nUPDATE accounts SET deposit = deposit - 100.00 WHERE name = 'A';\nCOMMIT;\nUPDATE accounts SET deposit = deposit + 100.00 WHERE name = 'B';\nCOMMIT;\n","SET autocommit=0;\n\nUPDATE accounts SET deposit = deposit - 100.00 WHERE name = 'A';\nUPDATE accounts SET deposit = deposit + 100.00 WHERE name = 'B';\nCOMMIT; -- COMMIT 並不會讓 autocommit 重新啟用\n\nUPDATE accounts SET deposit = deposit - 100.00 WHERE name = 'C';\nUPDATE accounts SET deposit = deposit + 100.00 WHERE name = 'D';\nROLLBACK; -- ROLLBACK 也不會讓 autocommit 重新啟用\n\nSET autocommit=1; -- 只有將 autocommit 設置為 1 時，才會重啟自動提交的功能。\n","SET autocommit=0; -- 先停用自動提交\n\nINSERT INTO log (content) VALUES ('A');\n\nBEGIN; -- 執行此行敘述前，會進行隱性提交，導致前面的 SQL 敘述被存入硬碟。\nINSERT INTO log (content) VALUES ('B');\nCOMMIT;\n\nINSERT INTO log (content) VALUES ('C');\n\nSET autocommit=1; -- 執行此行敘述前，會進行隱性提交，導致前面的 SQL 敘述被存入硬碟。\n","CREATE TABLE log (\n    content varchar(255)\n);\n\nBEGIN;\n    INSERT INTO log (content) VALUES ('First');\n\n    BEGIN;\n        INSERT INTO log (content) VALUES ('Second');\n        ROLLBACK;\n    COMMIT;\n\n    ROLLBACK;\nCOMMIT;\n","BEGIN;\nINSERT INTO users (username, password) VALUES ('USERNAME_1', 'PASSWORD_1');\nINSERT INTO users (username, password) VALUES ('USERNAME_2', 'PASSWORD_2');\n-- ...\nINSERT INTO users (username, password) VALUES ('USERNAME_1000', 'PASSWORD_1000');\nCOMMIT;\n","Footnotes","PostgreSQL 與 MySQL 關於 transaction 的設計理念","root","近日因為想要跳槽到 PostgreSQL，所以開始閱讀官方的參考文件。在讀到 "," 時，其中有一段不太能理解：","PostgreSQL actually treats every SQL statement as being executed within a transaction. If you do not issue a BEGIN command, then each individual statement has an implicit BEGIN and (if successful) COMMIT wrapped around it. A group of statements surrounded by BEGIN and COMMIT is sometimes called a transaction block.","因為以往對 transaction","的了解不深，一直以為只會用在「我有數個 SQL 敘述，希望能夠其中一個失敗時，取消其他 SQL 敘述的執行」的情況，所以不太能理解「每個 SQL 敘述預設帶有一個 transaction」的設計，非常疑惑為什麼會需要將單個 SQL 敘述也用 transaction 包起來。所以就去請教了對 PostgreSQL 有經驗的 ","。本篇文章大概就是在講述敝人向其請教後的理解。","PostgreSQL 參考手冊在 "," 的第一段，就以這樣的文字來敘述：","The essential point of a transaction is that it bundles multiple steps into a single, all-or-nothing operation. The intermediate states between the steps are not visible to other concurrent transactions, and if some failure occurs that prevents the transaction from completing, then none of the steps affect the database at all.","該文字的意思大概就是，transaction 可以把 PostgeSQL 裡面多個敘述併成一個，並且遵從「全或無」（all-or-nothing）","#user-content-fn-2","user-content-fnref-2"," 的操作；也就是若在併成一個操作裡的諸多敘述，若有其中一個敘述出錯，其他成功的敘述也會被撤銷，就等同全部都沒有執行。","這個功能比較常用的地方就在於金融業，常見的例子就是要避免 A 轉帳給 B 時，不能發生「扣了 A 的錢，但 B 那邊卻沒有增加」或是「對 A 扣錢失敗，但是 B 那邊的錢卻增加了」的情況，一定是要「扣了 A 的錢，也要加 B 的錢」，不然就是都不要發生。","在沒有特別處理的情況下，SQL 敘述大致如下：","：在沒有使用 transaction 的銀行交易情境示例","但若因為某種原因導致第一個敘述失敗，第二個敘述卻成功了，那麼銀行就會損失三萬元。若第一個敘述成功了，第二個敘述失敗，那顧客就會平白無故損失三萬元，導致銀行信譽掃地。所以在處理這類需要「全或無」的操作時，就必須將這些敘述宣告成一個 transaction block","http:\u002F\u002Fblog.fntsr.tw\u002Farticles\u002F904\u002F#fn-904-transaction","transaction block 的宣告方式，就是使用 "," 兩個敘述，將多個需要綁定的 SQL 敘述給包起來，以上面的案例來改進，大致如下：","程式碼 1-2","：使用 transaction 的銀行交易情境示例","若 transaction block 圍起來的敘述，只要有其中一個不成立，那麼 transaction block 裡的敘述就都不會被執行","回到原本的疑問，在解惑之前先闡述一個 PostgreSQL 的基本概念：","PostgreSQL 一次只會執行一個原子級操作（atomic operation，意味這該項操作不可分割），PostgreSQL 只會在完成一次原子級操作才會將結果從記憶體寫入檔案，若是中間有任何衝突，就會重新從檔案讀取資料回記憶體覆蓋失敗的部分、進行還原。","講到這邊，大概就能有點感覺。是的，transaction 就是 PostgreSQL 的原子級操作。","在沒有自行加入 "," 語法的情況下，PostgreSQL 是不會把結果從記憶體存回硬碟，但是為了方便操作，PostgreSQL 預設會把沒有在 transaction block 中的 SQL 敘述外自動加入","和 ","，也就是將該則敘述獨立視為一個 transaction block。如此才不用在編寫 SQL 敘述時，還有手動加上一對冗贅的 transaction 語法。","以"," 為例，雖然我們沒有幫他加上 transaction 語法，但是事實上它在執行時，是已經被 PostgreSQL 加入語法了，其真實的樣貌如下（","：PostgreSQL transaction 預設行為示例","所以每項敘述都會是一個原子級操作，都被視為一個 transaction block，在成功完成後，才會寫入硬碟。若失敗則會跳下一個敘述繼續執行（這邊是假設匯入 SQL檔的情境，其他情境要視失敗時對例外地處理決策決定是中止操作還是繼續執行）。","從上面透過設計理念的理解，原本的問題也就豁然開朗。了解其背後理念和原因後，也可以繼續思考以下問題，讓自己對這份知識更加熟稔：","匯入一個 SQL 文件 "," 到 PostgreSQL 時，假設 "," 裡沒有任何 transaction 語法，並有 N 行敘述，而第 M 行敘述是會發生衝突的，那資料庫最後會有幾筆異動？","\n(A) N 筆（成功執行所有敘述）","\n(B) N – 1 筆（成功執行除了第 M 行以外的敘述）","\n(C) M – 1 筆（只成功執行第 M 行之前的敘述，第 M 行及其之後的敘述都被駁回）","\n(D) 0 筆（全部敘述遭到駁回）","承問題一，若答案不是 (D) 選項，那為什麼在一起匯入的情況下，不是所有敘述都被駁回，而是部分被套用？","承問題二，那該怎麼做，才能讓匯入 SQL 文件到 PostgreSQL 時，是一有失敗就全部駁回，而不是部分套用呢？","在略曉 PostgreSQL 關於 transaction 的設計後，在這節轉向探討 MySQL 關於 transaction 的設計。","MySQL 也是擁有 transaction 功能的，也定義了 ","、","COMMIT"," 語法。它也會預設對沒有在 transaction block 中的 SQL 敘述，進行預設的行為，那到底是哪邊跟 PostgreSQL 不同呢？","MySQL 的設計理念是在於，遇到 "," 語法時，才會將資料從記憶體寫入硬碟，並且預設會對所有 SQL 敘述後自動在其後加上 ","，在 MySQL 稱這項預設行為為自動提交（auto commit）。以"," 為例，在 MySQL 中其真實的樣貌如下（","：MySQL auto commit 行為的示例","和"," 進行比較後，會發現 MySQL 在預設行為上，只會在敘述後加入 "," 而不會在之前加入 ","，這邊就顯示出兩者在設計概念上的不同。PostgreSQL 是以一個 transaction block 為一個單位作為 transaction 的操作；而 MySQL 則是以當下的 "," 到上一個 "," 之間的敘述作為 transaction 的操作（準確來說，是指目前還沒被提交過的敘述）。而 MySQL 的 "," 就類似一個局部停用自動提交的語法，並作用到一個 "," 或 "," 語法為止，如"," 所示。","：MySQL BEGIN & COMMIT 示例","若是要在當前連線全域關閉這個自動動提交（auto commit）","，可以透過 ","SET autocommit=0;"," 敘述，當 ","0"," 時，就會停用自動提交。若將這功能停用時，就必須自己加入 "," 以將之前執行成功且尚未提交過的敘述存入硬碟。與 "," 不同，就算遇到 ","，自動提交仍會保持停用，直到將 "," 重啟這功能為止。同樣以"," 作為案例，大致如下（","：MySQL autocommit 設置示例","除了自動提交外，在 MySQL 參考手冊的 ","13.3.3 Statements That Cause an Implicit Commit"," 有提到，當遇到修改資料表的敘述、資料定義語言（DDL）、或是 transactions 控制流程 ","和資料表鎖定相關的敘述時，在執行該敘述前，都會自動執行 ","，也就是所謂的隱性提交（implicitly commit）","#user-content-fn-7","user-content-fnref-7","2","。這部分可以參見"," 的示例加深理解。","：MySQL 隱性提交示例","這也導致了，MySQL 不能與 PostgreSQL 一般，進行 transactions 的嵌套（nested）","#user-content-fn-8","user-content-fnref-8","3","，因為若在 transactions 裡又輸入 "," 時，這之前的 SQL 敘述就會先被 "," 存入硬碟中。以下面程式碼（","）為例，在 MySQL 中，","First"," 是會被存入資料表的，PostgreSQL 則不會。","：transactions 嵌套示例","另外，也因為 transaction 是在整個 transaction 完成且成功的情況下才會將資料寫入硬碟，不會如同一般情況是一個敘述寫入一次（事實上，一個敘述也等同一個 transaction。），所以若遇到需要執行大量敘述時，可以透過 transaction block 包覆起來，讓全部執行完後再一次寫入硬碟，節省對硬碟做 I\u002FO 的時間，讓執行更加快。如","：","：大量敘述搭配 transaction 以提升效率的示例","本文透過對 PostgreSQL 對每個單一敘述都使用 transaction block 包覆起來的設計，以及 transaction 代表從記憶體寫入硬碟這件事的認知，總算一解原先對該段敘述的疑惑。也透過比較 MySQL 相對應的功能的設計，更深入了解 transaction 運作上的差異。有了這些概念，日後在兩套資料庫系統交互使用時，就能避免踩到地雷了。","最後，也感謝 "," 對這相關議題的講解以及 ","https:\u002F\u002Fgithub.com\u002FTEMU1086","@JasonWu"," 的共同討論。","hr"," transaction 通常在中文會翻譯成「交易」，但為了突顯其為本文探討的核心，在本文就不翻譯了。transaction block 亦同。","section","footnotes","sr-only","ol","user-content-fn-2","all-or-nothing 直譯就是「全有或全無」，社群多是直接使用原文為主。另外搜尋到的中山資管所","https:\u002F\u002Fwww.mis.nsysu.edu.tw\u002F~syhwang\u002FCourses\u002FDB\u002Fmanuscript.pdf","資料庫系統專題課程講義","裡面則是加註「完整的執行完畢或保持原狀都不做」。這邊為了突顯其專有名詞的意涵，刻意翻成比較文言的「全或無」，其他類似翻譯可以參照國家研究院的","http:\u002F\u002Fterms.naer.edu.tw\u002Fdetail\u002F1304408\u002F","雙語詞彙資訊網","；另有「悉無律」的翻譯，但這個詞似乎比較常作為漢字在日文中使用。這方面的翻譯多用在生物學的神經衝動現象上。（我和朋友都戲稱這叫老鼠屎原則，因為只要有敘述裡如有一顆老鼠屎的錯誤發生，就得將代表整鍋粥的 transaction block 全部丟掉。比較風雅一點的戲稱就是「鼠糞原則」。）"," PostgreSQL 在 transaction block 中，若遇到錯誤，會自動丟出 ","。 "," MySQL 預設是使用 SQL 標準的 ","START TRANSACTION;","作為 transaction 起始的宣告語法，但也支援 "," 作為同義語法。"," MySQL 在當前連線停用自動提交功能，並不會導致其他連線的自動提交也被停用。 "," MySQL 會造成隱性提交（implicit commit）的語法：","BEGIN","LOCK TABLES","SET autocommit = 1"," (若原本不等於 ","時), ","START TRANSACTION","UNLOCK TABLES",". ","#user-content-fnref-2","user-content-fn-7",": The statements listed in this section (and any synonyms for them) implicitly end any transaction active in the current session, as if you had done a COMMIT before executing the statement. ","#user-content-fnref-7","user-content-fn-8",": Transactions cannot be nested. This is a consequence of the implicit commit performed for any current transaction when you issue a START TRANSACTION statement or one of its synonyms.  ","#user-content-fnref-8","Transaction Design of PostgreSQL & MySQL",null,"BEGIN;\nUPDATE accounts SET deposit = deposit - 100.00 WHERE name = 'A';\nUPDATE accounts SET deposit = deposit + 100.00 WHERE name = 'B';\nCOMMIT;"))